<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Audio Training System</title>
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>
  <div class="container">
    <h1>üéµ –°–∏—Å—Ç–µ–º–∞ –¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ –ì–æ–ª–æ—Å–∞</h1>

    <!-- –ë–ª–æ–∫ 1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Generator -->
  <div id="generator-block" class="generator-block">
    <h3>üéπ –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ó–≤—É–∫–∞</h3>

    <!-- –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ -->
    <div class="gen-settings">
      <div class="gen-row">
        <label>–ß–∞—Å—Ç–æ—Ç–∞ (Hz):
          <input type="number" id="gen-frequency" value="440" min="20" max="20000">
        </label>
        <label>–¢–∏–ø –≤–æ–ª–Ω—ã:
          <select id="gen-waveform">
            <option value="sine">Sine</option>
            <option value="square">Square</option>
            <option value="sawtooth">Sawtooth</option>
            <option value="triangle">Triangle</option>
          </select>
        </label>
        <label>–ê–º–ø–ª–∏—Ç—É–¥–∞:
          <input type="range" id="gen-amplitude" min="0" max="1" step="0.1" value="0.5">
          <span id="gen-amplitude-value">0.5</span>
        </label>
      </div>

      <!-- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≥–∞—Ä–º–æ–Ω–∏–∫–∏ -->
      <div class="harmonics-section">
        <h4>–ì–∞—Ä–º–æ–Ω–∏–∫–∏</h4>
        <div id="harmonics-list"></div>
        <button id="add-harmonic" class="btn-secondary">+ –î–æ–±–∞–≤–∏—Ç—å –≥–∞—Ä–º–æ–Ω–∏–∫—É</button>
      </div>

      <button id="apply-generator" class="btn-primary">–ü—Ä–∏–º–µ–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</button>
    </div>

    <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–æ–º -->
    <div class="gen-controls">
      <button id="toggle-generator" data-state="off" class="btn-toggle">
        üéπ –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä: <span class="status">OFF</span>
      </button>
    </div>

    <!-- –ü—Ä–µ—Å–µ—Ç—ã -->
<div class="presets-section">
  <h4>üíæ –°–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –ø—Ä–µ—Å–µ—Ç—ã</h4>

  <div class="presets-actions">
    <input type="text" id="preset-name" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–µ—Å–µ—Ç–∞">
    <button id="save-preset" class="btn-secondary">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
    <label class="btn-secondary" title="–ò–º–ø–æ—Ä—Ç –ø—Ä–µ—Å–µ—Ç–∞">
      üìÅ –ò–º–ø–æ—Ä—Ç
      <input type="file" id="import-preset" accept=".json" style="display:none">
    </label>
  </div>

  <div id="presets-list" class="presets-list"></div>
</div>

    <!-- –ë–ª–æ–∫ 2: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ -->
    <section class="block" id="controls-block">
      <h2>üéõÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</h2>
      <div class="toggle-buttons">
        <!-- <button id="toggle-generator" class="toggle-btn" data-state="off">
          üéπ –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä <span class="status">OFF</span>
        </button> -->
        <button id="toggle-microphone" class="toggle-btn" data-state="off">
          üé§ –ú–∏–∫—Ä–æ—Ñ–æ–Ω <span class="status">OFF</span>
        </button>
        <button id="toggle-player" class="toggle-btn" data-state="off">
          üîä –ü–ª–µ–µ—Ä <span class="status">OFF</span>
        </button>
        <button id="toggle-recorder" class="toggle-btn" data-state="off">
          ‚è∫Ô∏è –ó–∞–ø–∏—Å—å <span class="status">OFF</span>
        </button>
      </div>
      <div id="init-message" class="message">–ù–∞–∂–º–∏—Ç–µ –ª—é–±—É—é –∫–Ω–æ–ø–∫—É –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∞—É–¥–∏–æ</div>
    </section>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <!-- –ë–ª–æ–∫ –ê–Ω–∞–ª–∏–∑–∞ -->
    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div id="analyzer-block" class="analyzer-block">
      <h3>üìä –ê–Ω–∞–ª–∏–∑ –ó–≤—É–∫–∞</h3>

      <!-- –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ -->
      <div class="metrics-grid">
        <div class="metric-card">
          <span class="metric-label">–ì—Ä–æ–º–∫–æ—Å—Ç—å (RMS)</span>
          <span class="metric-value" id="rms-value">0.00</span>
          <div class="metric-bar">
            <div class="metric-fill" id="rms-bar"></div>
          </div>
        </div>

        <div class="metric-card">
          <span class="metric-label">–ß–∞—Å—Ç–æ—Ç–∞ (Pitch)</span>
          <span class="metric-value" id="pitch-value">-- Hz</span>
          <span class="metric-note" id="note-name">--</span>
        </div>

        <div class="metric-card">
          <span class="metric-label">Zero Crossing</span>
          <span class="metric-value" id="zcr-value">0.00</span>
        </div>
      </div>

      <!-- –°–ø–µ–∫—Ç—Ä–∞–ª—å–Ω—ã–π –≥—Ä–∞—Ñ–∏–∫ -->
      <div class="spectrum-container">
        <canvas id="spectrum-canvas" width="800" height="200"></canvas>
      </div>

      <!-- –û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ –≥–∞—Ä–º–æ–Ω–∏–∫–∏ (—Ç–µ–∫—É—â–∏–µ) -->
      <div class="harmonics-section">
        <h4>üéµ –¢–µ–∫—É—â–∏–µ –ì–∞—Ä–º–æ–Ω–∏–∫–∏</h4>
        <div class="harmonics-list" id="current-harmonics"></div>
      </div>

      <!-- –£—Å—Ä–µ–¥–Ω–µ–Ω–Ω—ã–µ –≥–∞—Ä–º–æ–Ω–∏–∫–∏ (—Å—Ç–∞–±–∏–ª—å–Ω—ã–µ) -->
      <div class="harmonics-section">
        <h4>üìà –£—Å—Ä–µ–¥–Ω–µ–Ω–Ω—ã–µ –ì–∞—Ä–º–æ–Ω–∏–∫–∏</h4>
        <div class="harmonics-list" id="average-harmonics"></div>
      </div>

      <!-- –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –≥–∞—Ä–º–æ–Ω–∏–∫ -->
      <div class="harmonics-viz">
        <canvas id="harmonics-canvas" width="800" height="150"></canvas>
      </div>
    </div>

    <!-- –ë–ª–æ–∫ 4: –ú–∏–∫—Ä–æ—Ñ–æ–Ω –§–∏–ª—å—Ç—Ä—ã -->
    <section class="block" id="mic-filters-block">
      <h2>üéöÔ∏è –§–∏–ª—å—Ç—Ä—ã –ú–∏–∫—Ä–æ—Ñ–æ–Ω–∞</h2>
      <div class="filters-controls">
        <div class="control-group">
          <label>–§–ù–ß (Hz):</label>
          <input type="range" id="mic-lowpass" min="100" max="20000" value="8000">
          <span id="mic-lowpass-value">8000</span>
        </div>
        <div class="control-group">
          <label>–§–í–ß (Hz):</label>
          <input type="range" id="mic-highpass" min="20" max="1000" value="60">
          <span id="mic-highpass-value">60</span>
        </div>
        <div class="control-group">
          <label>Noise Gate (dB):</label>
          <input type="range" id="mic-noise-gate" min="-60" max="0" value="-42">
          <span id="mic-noise-gate-value">-42</span>
        </div>
        <div class="control-group">
          <label>Compressor Threshold (dB):</label>
          <input type="range" id="mic-compressor-threshold" min="-60" max="0" value="-20">
          <span id="mic-compressor-threshold-value">-20</span>
        </div>
      </div>
    </section>

    <!-- –ë–ª–æ–∫ 5: Storage -->
    <section class="block" id="storage-block">
      <h2>üíæ –•—Ä–∞–Ω–∏–ª–∏—â–µ</h2>
      <div id="storage-list" class="storage-list"></div>
    </section>

    <!-- –ë–ª–æ–∫ 6: AudioCatcher -->
    <section class="block" id="catcher-block">
      <h2>üéØ –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ (AudioCatcher)</h2>
      <div class="catcher-controls">
        <button id="enable-catcher" class="btn-primary">–í–∫–ª—é—á–∏—Ç—å –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ</button>
        <button id="add-selected-to-catcher" class="btn-secondary">–î–æ–±–∞–≤–∏—Ç—å –í—ã–±—Ä–∞–Ω–Ω–æ–µ –≤ –≠—Ç–∞–ª–æ–Ω—ã</button>
      </div>
      <div id="catcher-templates" class="catcher-templates"></div>
    </section>
  </div>


  <!-- –°–∫—Ä–∏–ø—Ç—ã -->
  <script src="js/config.js"></script>
  <script src="js/utils/EventEmitter.js"></script>
  <script src="js/utils/WAVExporter.js"></script>
  <script src="js/utils/PitchDetection.js"></script>
  <script src="js/classes/GeneratorPresets.js"></script>
  <script src="js/classes/Generator.js"></script>
  <script src="js/classes/Microphone.js"></script>
  <script src="js/classes/Analyzer.js"></script>
  <script src="js/classes/Player.js"></script>
  <script src="js/classes/Recorder.js"></script>
  <script src="js/classes/Storage.js"></script>
  <script src="js/classes/AudioComparator.js"></script>
  <script src="js/classes/AudioCatcher.js"></script>
  <script src="js/main.js"></script>
</body>
<audio src="./sounds/1.wav" data-name="–≠—Ç–∞–ª–æ–Ω 1"></audio>
<audio src="./sounds/2.wav" data-name="–≠—Ç–∞–ª–æ–Ω 2"></audio>
</html>
